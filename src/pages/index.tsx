import { signIn, signOut, useSession } from "next-auth/react";
import Head from "next/head";
import Link from "next/link";
import { api } from "~/utils/api";
import Image from "next/image";
import Header from "~/components/Header";
import PageWrapper from "~/components/PageWrapper";
import Invoice from "~/components/Invoice";

export default function Home() {
  const { data, isLoading } = api.invoice.getAll.useQuery();

  return (
    <>
      <Head>
        <title>Invoices</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <PageWrapper>
        <Header />
        <main className="flex w-full flex-col items-center bg-light font-spartan">
          <div className="flex w-[calc(100%-1.5rem)] max-w-[45.625rem] py-8 md:py-12">
            <div className="flex w-full items-center justify-between px-2">
              <div>
                <h1 className="text-heading-m font-bold leading-heading-m tracking-heading-m">
                  Invoices
                </h1>
                <p className="text-06">
                  {isLoading
                    ? "invoices"
                    : data!.length > 1
                    ? `${data?.length} invoices`
                    : `${data?.length} invoice`}
                </p>
              </div>
              <div className="flex items-center gap-3">
                <label
                  className="text-heading-s font-bold leading-body-var tracking-heading-s"
                  htmlFor=""
                >
                  Filter
                </label>
                <select name="filter" id="filter"></select>
                <button className="flex h-[3rem] w-auto items-center justify-between gap-2 rounded-full bg-01 px-2 text-white md:w-[9.375rem]">
                  <div className="flex h-8 w-8 items-center justify-center rounded-full bg-white">
                    <Image
                      alt="plus"
                      src="/images/icon-plus.svg"
                      width={11}
                      height={11}
                      className="object-center"
                    />
                  </div>
                  New
                </button>
              </div>
            </div>
          </div>

          {data?.map((data) => (
            <Invoice key={data.id} invoice={data} />
          ))}
        </main>
      </PageWrapper>
    </>
  );
}
